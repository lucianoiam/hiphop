var Xe=Object.create;var ut=Object.defineProperty;var we=Object.getOwnPropertyDescriptor;var Ye=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty;var tr=(s,t,e)=>t in s?ut(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var er=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),At=(s,t)=>{for(var e in t)ut(s,e,{get:t[e],enumerable:!0})},Gt=(s,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ye(t))!Ze.call(s,n)&&n!==e&&ut(s,n,{get:()=>t[n],enumerable:!(r=we(t,n))||r.enumerable});return s},v=(s,t,e)=>(Gt(s,t,"default"),e&&Gt(e,t,"default")),rr=(s,t,e)=>(e=s!=null?Xe(Qe(s)):{},Gt(t||!s||!s.__esModule?ut(e,"default",{value:s,enumerable:!0}):e,s));var I=(s,t,e,r)=>{for(var n=r>1?void 0:r?we(t,e):t,i=s.length-1,o;i>=0;i--)(o=s[i])&&(n=(r?o(t,e,n):o(n))||n);return r&&n&&ut(t,e,n),n};var k=(s,t,e)=>(tr(s,typeof t!="symbol"?t+"":t,e),e),be=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var Z=(s,t,e)=>(be(s,t,"read from private field"),e?e.call(s):t.get(s)),tt=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},L=(s,t,e,r)=>(be(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var Oe=er((Ss,Me)=>{Me.exports={}});var xe={};At(xe,{AbortOptions:()=>Rt,ContextClass:()=>D,DispatchOptions:()=>gt,EventOptions:()=>ot,Intersect:()=>S,Line:()=>j,Matrix:()=>A,Morph:()=>$,MouseButton:()=>re,OnOptions:()=>_t,Point:()=>g,Polygon:()=>x,Polyline:()=>q,PropertySettings:()=>Dt,PropsRef:()=>at,QueueOptions:()=>G,Rect:()=>R,Ref:()=>Nt,RefCollection:()=>wt,RefMap:()=>ce,RefProxy:()=>he,RefSet:()=>ae,Scalar:()=>N,Shape:()=>P,State:()=>Y,Task:()=>$t,Transition:()=>Bt,TransitionSettings:()=>Kt,Vec3:()=>me,_:()=>ye,abort:()=>pr,attr:()=>Sr,cardinal:()=>Rr,chain:()=>se,css:()=>kr,cssToJs:()=>fe,dataset:()=>Dr,dispatch:()=>J,dispatchBind:()=>mr,element:()=>ue,event:()=>xr,findParentElement:()=>Fr,getActiveElement:()=>Ue,getElementOffset:()=>_r,is:()=>Mr,isMobile:()=>He,jsToCss:()=>pe,kbd:()=>Nr,mix:()=>Ge,mixin:()=>Hr,mixins:()=>de,nodesToText:()=>ge,observe:()=>qr,observeNodes:()=>Ve,on:()=>_,onAll:()=>ne,onSlotChange:()=>Je,onTextChange:()=>zr,ondblclick:()=>Ir,out:()=>vr,prop:()=>Ft,protoPropertyMap:()=>ct,queue:()=>yr,render:()=>B,shadow:()=>Kr,slotted:()=>We,taskGroup:()=>it,taskRun:()=>U,transition:()=>Br,warn:()=>Gr,wrapEvent:()=>zt,wrapQueue:()=>X});var dt={};At(dt,{Fragment:()=>Zt,createHook:()=>te,createProps:()=>pt,hook:()=>C,html:()=>rt,jsx:()=>st,jsxs:()=>je,render:()=>B,renderCache:()=>Pt,svg:()=>mt,updateProps:()=>kt});var w={};At(w,{Fragment:()=>Zt,createHook:()=>te,createProps:()=>pt,hook:()=>C,html:()=>rt,jsx:()=>st,jsxs:()=>je,render:()=>B,renderCache:()=>Pt,svg:()=>mt,updateProps:()=>kt});var sr=(s,t)=>Object.fromEntries(Object.entries(s).filter(t));var lt=(s,t)=>t.reduce((e,r)=>(r in s&&(e[r]=s[r]),e),{}),jt=(s,t)=>sr(s,nr(t,!0)),nr=(s,t=!1)=>([e])=>t^s.includes(e);var d=Symbol.for("to-fluent-bool"),b=(s,t)=>{let e=Object.entries(new s).filter(([,u])=>u===d||typeof u=="boolean"),r=e.map(([u])=>u),n=e.filter(([,u])=>u===d).map(([u])=>u),i=jt(new s,n),o=!1,c=u=>new Proxy(t,{get(l,a,h){if(a==="not")return o=!0,h;if(r.includes(a)){let f=!o;return o=!1,c({...u,[a]:f})}else return f=>c({...u,[a]:f})},construct(l,a){let h=t.call(self,{...u});return new h(...a)},apply:(l,a,h)=>t.call(a,{...u}).apply(a,h)});return c(i)};var Lt=class{#t={};get listeners(){return this.#t}set listeners(t){this.#t=Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r.filter(n=>n.callback!=null)]).filter(([,e])=>e.length))}constructor(t){Object.assign(this,t)}emit(t,...e){if(this.listeners[t])try{this.listeners[t].forEach(r=>{typeof r.callback=="function"&&r.callback(...e),r.once===!0&&this.off(t,r.callback)})}catch{}return this}on(t,e,r){return e?(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].some(i=>i.callback===e)||this.listeners[t].push({...r,callback:e}),()=>{this.off(t,e)}):()=>{}}off(t,e){if(!this.listeners[t])return;let r=this.listeners[t].findIndex(n=>n.callback===e);return r>=0&&this.listeners[t].splice(r,1),this.listeners[t].length===0&&delete this.listeners[t],this}once(t,e){return this.on(t,e,{once:!0})}};var cs=Array.isArray;function K(s){return Object.entries(s)}function Ht(s){return Object.fromEntries(s)}function et(s,t,e,r=()=>!0){let n=new Map;return Object.defineProperties(s,Object.fromEntries(K(t).filter(([i])=>typeof i=="string").filter(([i,o])=>r(i,o)).map(([i,o])=>{let c=e(i,o),u=Object.getOwnPropertyDescriptor(s,i);if(n.set(i,u),u&&u.get&&u.set){let{get:l,set:a}=c;c.get=()=>{let h=l?.();return u.get()??h},c.set=h=>{u.set?.(h),a(u.get?.()??h)}}return[i,{configurable:!0,enumerable:!0,...c}]}))),()=>{for(let[i,o]of n){o==null?delete s[i]:Object.defineProperty(s,i,o)}}}function Vt(s){return s.replace(/[a-z](?=[A-Z])|[A-Z]+(?=[A-Z][a-z])/g,"$&-").toLowerCase()}function Wt(s){let t="";for(let e in s)t+=s[e]!=null&&s[e]!==!1?Vt(e)+":"+s[e]+";":"";return t}function Jt(s,t,e=!1){let r=s.indexOf(t);if(!~r){if(e)return;throw new ReferenceError("Item to be removed does not exist in the array.")}return s.splice(r,1)}function Se(s,t){return[[s,t],[t,s]].every(([e,r])=>K(e).every(([n,i])=>n in r&&r[n]==i))}function Ut(s,t){return Object.getOwnPropertyDescriptor(s,t)?.value}var ft=b(class{configurable=!1;enumerable=!1;writable=d},s=>(t,e,r)=>Object.defineProperty(t,e,r==null?s:{...s,value:r}));function W(s,t){return s.map(t).filter(e=>e!=null&&e!==!1)}function ir(s){return s?.toString().startsWith("class")}function ve(s,t=s){return Object.assign(t,Object.fromEntries(W(K(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(s))),([e,r])=>typeof r.value=="function"&&!ir(r.value)&&[e,r.value.bind(s)])))}var M={};v(M,rr(Oe(),1));v(w,M);function Xt(s){return s.charAt(0)==="o"&&s.charAt(1)==="n"&&!s.endsWith("ref")}function Yt(s){return s.slice(2)}function or(s){return s.tagName.includes("-")}function Ee(s=rt,t,e,r,n,i,o){switch(r){case"children":return;case"style":n=n?.valueOf(),typeof n=="object"&&(n=Wt(n)),n&&(t.setAttribute("style",n),i.style=t.getAttributeNode("style"));return}let c=r;n=n?.valueOf();let u=!o||["class"].includes(r);switch(typeof n){case"string":case"number":if(s===mt||u&&!(r in t)){t.setAttribute(c,n),i[c]=t.getAttributeNode(c);return}break;case"function":if(Xt(c)){t.addEventListener(Yt(c),n,n)}else{if(u){t.setAttribute(c,""),i[c]=t.getAttributeNode(c)}t[r]=n}return}if(n==null){u&&(t.removeAttribute(c),delete i[c]),t[r]!=null&&delete t[r];return}t[r]=n==="false"?!1:n,u&&t.hasAttribute(c)&&(i[c]=t.getAttributeNode(c))}var Tt=new WeakMap;function pt(s,t,e,r={},n={},i=t){let o=or(t);for(let c in r)Ee(s,t,e,c,r[c],n,o);Tt.set(i,{props:r,attrs:n,isCustom:o})}function kt(s,t,e,r={},n=t){if(!Tt.has(n))return r&&pt(s,t,e,r,void 0,n);let i=Tt.get(n),{attrs:o,props:c,isCustom:u}=i;if(!r){for(let h in o){t.removeAttributeNode(o[h])}for(let h in c)if(Xt(h)){t.removeEventListener(Yt(h),c[h],c[h])}else{delete t[h]}Tt.delete(n);return}let l,a;t:for(let h in c){if(!(h in r)){delete t[h];continue}switch(a=r[h],h){case"children":continue t}if(a=a?.valueOf(),l=c[h],l!==a){if(typeof a=="function"){if(l?.fn&&a?.fn){a=l.update(a.fn,a.options),a===l&&(r[h]=a)}if(l!==a||n!==t){let f=h;if(Xt(f)){f=Yt(f);l&&t.removeEventListener(f,l,l),a&&t.addEventListener(f,a,a)}else{c[f]=t[f]=a}}}else if(!(h in o))if(a==null){t[h]!=null&&(t[h]=a)}else t[h]=a==="false"?!1:a}}for(let h in o){if(!(h in r)||r[h]===!1||r[h]==null){t.removeAttribute(h),delete o[h];continue}switch(a=r[h]?.valueOf(),h){case"style":typeof a=="object"&&(a=Wt(a));break}if(c[h]!==a&&typeof a!="function")if(a==null){if(o[h].value!=null){t.removeAttribute(h),delete o[h]}}else o[h].value=a}for(let h in r)!(h in o)&&!(h in c)&&Ee(s,t,e,h,r[h],o,u);i.props=r}var Zt=Symbol(),st=(s,t,e)=>s===Zt?t.children:{kind:s,props:t,key:e},je=st,C,te=()=>ve(new Lt,function s(t=s.fn){let e=C;C=s,C.fn=t,C.onstart?.(),C.emit("start"),t(),C.onend?.(),C.emit("end"),C=e}),Qt=class extends Array{firstChild;dom=[];get last(){return this.dom.at(-1)}get nextSibling(){return this.last?.nextSibling}appendChild(t){this.push(t)}after(t){this.last?.after(t)}save(){this.dom=[...this]}remove(){this.dom.forEach(t=>{t.onunref?.(),t.remove()}),this.splice(0)}removeChild(t){let e=this.indexOf(t);~e&&this.splice(e,1)}},{TEXT_NODE:cr,COMMENT_NODE:ar}=document,rt=document.createElement.bind(document),mt=document.createElementNS.bind(document,"http://www.w3.org/2000/svg"),hr=(s,t)=>Array.isArray(s)?t&&!s.length?[null]:s:s==null&&!t?[]:[s],Ct=(s,t=[])=>{for(let e of s)e.dom?t.push(...Ct(e.dom)):t.push(e);return t},Pt=new WeakMap;function B(s,t=document.createDocumentFragment(),e=rt,r=!1){return Le(t,hr(s,r),Pt.get(t),e),t}function Le(s,t,e,r){if(e?.running){console.warn("attempt to reconcile lane which is reconciling");return}if(e!==t){if(t.running=!0,Pt.set(s,t),t.dom=Array(t.length),t.keyed=new Map,t.mapped=new Map,Array.isArray(e)){let n=new Set;for(let i=0,o,c,u,l,a,h;i<t.length;i++)o=t[h=i],a=o?.key??o?.ref?.key,a!=null&&(t.keyed.set(a,i),h=e.keyed.get(a)??-1),u=e[h],l=e.dom[h],t.dom[i]=c=Ae(r,o,u,l),t.mapped.set(c,o),c===l&&n.add(l);for(let i of e.dom)if(!n.has(i)){i.onunref?.(),i.remove();let o=e.mapped.get(i)?.hook;o?.onremove?.(),o?.emit("remove")}}else for(let n=0,i,o,c;n<t.length;n++)i=t[n],c=i?.key??i?.ref?.key,c!=null&&t.keyed.set(c,n),t.dom[n]=o=Ae(r,i),t.mapped.set(o,i);t.flatDom=Ct(t.dom),e?.flatDom?lr(s,t.flatDom,e.flatDom):t.flatDom.forEach(n=>s.appendChild(n)),t.running=!1}}function ur(s){return s?.ref&&s!==s.ref.current&&queueMicrotask(()=>{s.isConnected&&(s.ref.current=s)}),s?.onref&&queueMicrotask(()=>{s.isConnected&&(s.onunref=s.onref(s))}),s}function lr(s,t,e,r=0,n=t.length,i,o){if(s instanceof Qt){for(;r<n;r++)if(i=t[r],r<s.length){if(e[r]===i)continue;s[r]=i}else s.push(i);let c=s.length-n;for(;c--;)s.pop()}else for(;r<n;r++)i=t[r],e[r]===i?o=i:r?o.after(o=i):s.insertBefore(o=i,s.firstChild)}function Ae(s,t,e,r){let n;switch(typeof t){case"string":case"number":return r?.nodeType===cr?(e!=t&&(r.nodeValue=t),r):(n=new Text(t),n);case"object":if(!t)break;if(Array.isArray(t))r&&Array.isArray(e)?n=r:n=new Qt,t.length||t.push(null),Le(n,t,e,s),n.save();else if(typeof t.kind=="string")t.kind==="svg"&&(s=mt),t.props.ref?.current&&t.props.ref.current.tagName.toLowerCase()===t.kind&&(n=t.props.ref.current)||r&&e?.kind===t.kind&&(n=r)?(n.onprops?.(t.props),kt(s,n,t.kind,t.props)):(n=s(t.kind,"is"in t.props?{is:t.props.is}:void 0),n.onprops?.(t.props),pt(s,n,t.kind,t.props)),t.kind==="foreignObject"&&(s=rt),t.kind.includes("-")||B(t.props.children,n,s),ur(n);else{let i=!0,o=!1;(n=r)&&(t.hook=e?.hook)||(n=new Qt,t.hook=te(),o=!0);let c=new Comment,u,l;t.hook(function(){let h;if(!i&&!(h=n.nextSibling)&&n.after(h=c),typeof t.kind!="function"){console.warn("Hook called but node is not a function component."),console.warn(t);return}if(B(t.kind(t.props),n,s,!0),n.save(),!i&&h){if(l=Ct(n),u?.length>0)for(let f=0,p,y;f<l.length;f++)y=l[f],p?p.after(p=y):u[f]!==y?h.before(p=y):p=p&&y;else for(let f of l)h.before(f);u=l,h===c&&h.remove()}else u=Ct(n),i=!1}),o&&t.props.hook&&(t.props.hook.current=t.hook,t.props.onunhook??=t.props.onhook?.(t.hook),t.hook.once("remove",()=>{queueMicrotask(()=>{t.props.onunhook?.(t.hook),t.props.hook.current=null})}))}return n}return r?.nodeType===ar?r:(n=new Comment,n)}v(dt,w);var nt=(s,t={})=>new Proxy(t,{get:(e,r)=>s(r)}),ee=Symbol();function Te(s){let t=()=>{},e=Object.assign([],{origin:new Error}),r=new Proxy(t,{get:(n,i,o)=>i===ee?!0:i==="_results"||i==="ops"?e:(e.push(["get",i]),o),apply:(n,i,o)=>{let c=["apply",o];e.push(c);let u=s?.callMethod(e.at(-2)[1],o,e);return u??r}});return r}var ke=(s,t)=>{let e=t;for(let[r,n]of s)r==="get"?e=e[n]:r==="apply"&&(e=e(...n));return e};var fr=s=>{let t=s.indexOf("{")+1;if(!t||s.slice(0,t).includes(")"))return[];s=s.slice(t);let e;do e=!1,s=s.replace(/`((\\`)?[^`])+?`|'((\\')?[^'])+?'|"((\\")?[^"])+?"|\([^{[(]*?\)|\{[^{[(]*?\}|\[[^{[(]*?\]/g,()=>(e=!0,""));while(e);return s.split("}")[0].split(",").map(r=>r.split(/[^\w\s$]+/g)[0].trim())},Ce=(s,t=new Set)=>(fr(""+s).forEach(e=>!e||t.add(e)),t);var Rt=class{throw=d;latest=d;timeout},pr=b(Rt,s=>t=>{let e;return Object.assign(async function(...i){if(s.latest&&e&&e.abort(),e=new AbortController,s.timeout!=null){let o=new Error("Timed out");try{return await Promise.race([new Promise((c,u)=>setTimeout(u,s.timeout,o)),t(e.signal).apply(this,i)])}catch(c){if(c===o){if(e.abort(),s.throw)throw c;{}}else{if(s.throw)throw c;{}}}}else return t(e.signal).apply(this,i)},{fn:t()})});var re={Left:1,Right:2,Middle:4};var gt=class{bubbles=d;cancelable=d;composed=d},Pe=(s,t,e,r,n)=>s.dispatchEvent(t instanceof Event?t:new CustomEvent(t,{detail:e,...r,...n})),J=b(gt,s=>(t,e,r,n)=>Pe(t,e,r,n,s)),mr=s=>b(gt,t=>(e,r,n)=>Pe(s,e,r,n,t));function dr(s,t){this.resolve=s,this.reject=t}function $t(s,t,e){let r={fn:s,self:t,args:e};return r.promise=new Promise(dr.bind(r)),r}function U(s,t){return s.resolve(t=s.fn.apply(s.self,s.args)),t}function gr(s,t){return s.promise.then(t.resolve)}function it(s,t){return t.forEach(gr.bind(null,s))}var G=class{first=d;last=d;next=d;raf=d;task=d;time=d;atomic=d;concurrency;debounce;throttle;hooks},X=(s={})=>t=>{let e={...s},r=[],n,i,o,c=!1;if(s.hooks&&(s.hooks.before||s.hooks.after)){let h=t;t=function(...p){s.hooks.before?.();let y=h.apply(this,p);return s.hooks.after?.(),y}}if(s.raf)n=requestAnimationFrame;else if(s.task)n=queueMicrotask;else if(s.time)n=setTimeout;else if(s.throttle!=null)n=h=>{c=!0,setTimeout(()=>{r.length||(c=!1),h()},s.throttle)};else if(s.debounce!=null)n=h=>{clearTimeout(i),i=setTimeout(h,s.debounce)};else if(s.atomic)n=h=>h();else return Object.assign(t,{fn:t,update:()=>t}),t;s.first==null&&s.last==null&&(s.throttle!=null?(s.first=!0,s.last=!0):s.debounce!=null?s.last=!0:s.next=!0);let u=0;function l(){let h;if(r.length){if(s.atomic){s.last?(h=r.pop(),r.splice(0)):h=r.shift(),U(h).catch(f=>{}).finally(()=>{s.concurrency&&u--,n(l)}),s.concurrency&&(u++,u<s.concurrency&&n(l));return}if(s.last){if(s.next){let f=r.splice(0,r.length-1);h=f.pop()??r.pop(),it(h,f),o=U(h),(r.length||s.throttle)&&n(l);return}else if(h=r.pop(),it(h,r.splice(0)),o=U(h),s.throttle){n(l);return}}else if(s.next){h=r.shift(),it(h,r.splice(0,r.length-1)),n(l),o=U(h);return}else h=$t(),it(h,r.splice(0)),h.resolve(o)}c=!1}function a(...h){let f=$t(t,this,h);return!c&&s.first&&(c=!0,!r.length)?(o=U(f),n(l),f.promise):(r.push(f),(!c||s.debounce)&&(c=!0,n(l)),f.promise)}return a.fn=t,a.options=e,a.update=(h,f)=>{if(!Se(e,f)){return h}t=h;return a},a},yr=b(G,X);var ot=class extends G{prevent=d;stop=d;immediate=d;capture=d;once=d;passive=d},zt=(s={})=>(t=()=>{})=>X(s)(s.prevent||s.stop||s.immediate||s.capture!=null||s.once!=null||s.passive!=null?Object.assign(function(r){return s.prevent&&r.preventDefault(),s.stop&&(s.immediate?r.stopImmediatePropagation():r.stopPropagation()),t.call(this,r)},s):t),xr=b(ot,zt);function se(s,...t){if(!(Array.isArray(s)&&([s,...t]=s.flat().filter(Boolean),s==null)))return t=t.filter(Boolean),(...e)=>{s?.(...e);for(let r of t)r(...e)}}var ne=(s,t,...e)=>{let r=s.dispatchEvent,n=new Set;return s.dispatchEvent=function(i){return n.has(i.type)||(s.addEventListener(i.type,t,...e),n.add(i.type)),r.call(this,i)},()=>{for(let i of n)s.removeEventListener(i,t,...e);n.clear(),s.dispatchEvent=r}};var _t=class extends ot{once=d;passive=d;capture=d},wr=(s,t,e,r)=>(s.addEventListener(t,e,r),()=>s.removeEventListener(t,e,r)),Re=(s,t)=>b(_t,e=>(r=()=>{})=>wr(s,t,zt(e)(r),e));function _(s,t){return t!=null?Re(s,t):nt(e=>Re(s,e))}var ie=Symbol(),oe=Symbol(),H=class extends G{cb;keys;once=d;lock=d;isFulfillReducer=d},V=class{remove;target;values={};pass;constructor(t){Object.assign(this,t)}},yt,D=class{entries;mem;keys;effects;triggered;active;reducer;$;scheduled;listeners;static attach(t,e={}){if(t.context instanceof D)return;t.context=new D(t),t.context.mutate(()=>{t.$=Object.assign(t.context.$,e)})}constructor(t){this.target=t,this.keys=new Set,this.triggered=new Set,this.$={},this.scheduled=new Set,this.listeners=new Map,this.maybeAddChangeListener=(e,r)=>{if(typeof r!="object"||!(r instanceof EventTarget)||typeof Element<"u"&&r instanceof Element)return;let[n,i]=this.listeners.get(e)??[];if(n===r)return;i?.();let o=new WeakSet,c=()=>{this.clearKey(e),this.target[e]=r,this.runEffects(e)};return this.listeners.set(e,[r,ne(r,u=>{if(u.type==="change"&&c(),o.has(u))return;let l=new u.constructor(u.type,{...u,detail:u.detail,composed:!0,bubbles:!0});if(o.add(l),typeof Element>"u"||!(this.target instanceof Element))throw console.error(this.target),new Error("Target is not an EventTarget");this.target.dispatchEvent(l)})]),!0},this.cleanup=()=>{if(this.effects)for(let e of this.effects.values())e.forEach(r=>r.dispose?.());this.effects=new Map([[ie,[]],...this.entries.map(([e])=>[e,[]])])},this.register=e=>(e.keys=e.options?.keys??Ce(e.fn),e.fn=X(e.options)(e.fn),e.keys.forEach(r=>{let n=this.effects.get(r);if(!n){console.warn("No effects for key:",r);return}n.push(e)}),!e.keys.size&&this.effects.get(ie).push(e),e.remove=async()=>{e.keys.size?e.keys.forEach(r=>{let n=this.effects.get(r);if(!n){console.warn("No effects for key:",r);return}Jt(n,e,!0)}):Jt(this.effects.get(ie),e),this.triggered.has(e)&&this.triggered.delete(e),e.dispose?.()},this.run(e)),this.flush=()=>{let e=[...this.triggered];this.triggered.clear(),e.forEach(this.run)},this.run=e=>{if(!(e.pass&&e.options?.once)){if(this.active||yt){e!==this.active&&this.triggered.add(e),yt?.add(this);return}return this.active=e,this.update(e)&&(e.dispose?.(),!e.pass)?(e.values={},this.complete()):this.finalize()}},this.complete=e=>{let r=this.active;if(!r.pass){this.active=null,this.flush();return}if(r.cb?.(e)===!1){this.active=null,this.flush();return}if(r.target!=null&&!r.options?.isFulfillReducer)return this.target[r.target]=e,this.active=null,this.flush(),!0;typeof e=="function"&&(r.dispose=()=>{e(),r.dispose=null}),this.active=null,this.flush()},this.reduce=b(H,e=>(r,n)=>(this.reducer=new V({fn:r,options:e,initial:n}),oe)),this.fulfill=b(H,e=>(r,n)=>(e.isFulfillReducer=!0,this.reducer=new V({fn:r,options:e,initial:n}),oe)),this.effect=b(H,e=>(r,n)=>{let i=new V({fn:r,cb:n??e.cb,options:e});return this.register(i),i.remove}),this.mutate=e=>{let r=new V({fn:e,options:{lock:!0}});return r.keys=new Set,r.values={...this.target},this.run(r)},this.mutating=e=>()=>{this.mutate(e)},this.use=e=>e(this.target),this.using=e=>()=>e(this.target),this.function=e=>{let{withLock:r,target:n}=this;function i(...o){let c;return r(()=>{c=e(n).apply(this,o)}),c}return i},this.with=e=>{let{target:r}=this;function n(...i){return e(r).apply(this,i)}return n},this.callback=b(H,e=>r=>{let{mutate:n}=this;return X(e)(function(...c){n(u=>{r(u).apply(this,c)})})}),this.atomic=e=>this.callback(()=>e),this.query=e=>this.reduce(({root:r})=>r.querySelector(e)),this.when=(e,r)=>function(...n){e&&r.apply(this,n)},this.withGlobalLock=e=>{yt=new Set;try{e()}catch(n){console.warn(n)}let r=[...yt];yt=null;for(let n of r)n.flush()},this.withLock=e=>{this.active=e;try{e()}catch(r){console.warn(r)}this.active=null,this.flush()},this.copyMethods(),this.createMemory(),this.createAccessors(),this.cleanup();for(let e of this.scheduled)if(e.value){let{key:r,value:[n,i]}=e;this.$[r]=this.$[n](...i)}else if(e.captured){let{key:r,captured:n}=e;this.$[r]=ke(n,this.$)}}copyMethods(){Object.assign(this.$,lt(this,["atomic","callback","cleanup","effect","fulfill","function","mutate","mutating","reduce","register","render","use","using","query","when","with","withLock","globalLock"]))}runEffects(t){this.effects.get(t).forEach(this.run)}clearKey(t){this.effects.get(t).forEach(e=>{delete e.values[t]})}maybeAddChangeListener;createMemory(){let t=this.target._pendingProperties;this.entries=K(this.target),this.mem=Ht(this.entries.map(([e,r])=>(typeof r=="symbol"&&t&&t.has(r)&&(this.scheduled.add({key:e,value:t.get(r)}),r=void 0),typeof r=="function"&&r[ee]===!0&&(this.scheduled.add({key:e,captured:r._results}),r=void 0),[e,r])))}createAccessors(){et(this.$,this.target,t=>({get:()=>this.mem[t],set:e=>{e===oe&&(e=this.reducer.initial,this.reducer.target=t,this.register(this.reducer)||e==null)||(this.target[t]=e)}}),t=>!this.keys.has(t)),et(this.target,this.target,t=>({get:()=>this.mem[t],set:e=>{let r=this.mem[t],n=!Object.is(r,e);if(n){this.mem[t]=e;this.runEffects(t)}}}),t=>this.keys.has(t)?!1:(this.keys.add(t),!0)),et(this.target,Ht(K(this.mem).filter(([t,e])=>{if(this.maybeAddChangeListener(t,e))return!0})),t=>({set:e=>{this.maybeAddChangeListener(t,e)}}))}cleanup;register;update(t){let e=t.pass==null;t.pass??=!t.keys.size;for(let r of t.keys){let n=this.target[r];if(n==null)return t.pass=!1,!0;Object.is(t.values[r],n)||(t.values[r]=n,t.pass=!0,e=!0)}return e}flush;run;get _fulfill(){let t=this.active,e=t?.target;if(t==null||e==null)throw new TypeError("Attempted to use `fulfill` when no reducer was active.");return r=>{this.target[e]=r}}finalize(){let t=this.active,e=t.fn.call(this,t.values);return t.options?.isFulfillReducer&&(e=e(this._fulfill)),e?.then?(e.then(r=>{try{if(t.cb?.(r)===!1)return;t.target!=null&&!t.options?.isFulfillReducer&&(this.target[t.target]=r)}finally{t.options?.lock&&(this.active=null,this.flush())}}),t.options?.lock||(this.active=null,this.flush()),!0):this.complete(e)}complete;reduce;fulfill;effect;mutate;mutating;use;using;function;with;callback;atomic;query;when;withGlobalLock;withLock;target};if(!customElements.getName){let s=new WeakMap,{define:t}=customElements;customElements.define=function(e,r,n){return s.set(r,e),t.call(customElements,e,r,n)},customElements.getName=function(e){return s.get(e)}}var br=0,$e=(s,t=s.elementOptions??{},e={})=>{let r,n=customElements.getName(s);if(!n){for(n=Vt(s.name).replace("-element",""),n.includes("-")||(n="x-"+n);customElements.get(n)!=null;)n+=(++br).toString(36);customElements.define(n,s,t)}return t.extends?r=i=>st(t.extends,Object.assign({},e,i,{is:n}),void 0):r=i=>st(n,Object.assign({},e,i),void 0),r.toString=()=>n,r};var xt=new Map([[String,s=>s.toString()],[Number,s=>parseFloat(s)],[Boolean,s=>s=s===!1?!1:s!=null]]),ze=(s,t,e)=>{for(let[n,i]of Object.entries(t)){[String,Number,Boolean].includes(i)?s[n]=t[n]=void 0:i===!0?t[n]=!0:typeof i=="object"&&(t[n]=i.toString());}let r=(n,i,o)=>{if(typeof o=="boolean")o?s.setAttribute(n,""):s.hasAttribute(n)?s.removeAttribute(n):t[i]=!1;else{s.setAttribute(n,o)}};return et(s,t,n=>{let i=n.toLowerCase();return{get:()=>t[n],set(o){s.isConnected?r(i,n,o):e.push(()=>r(i,n,o))}}})},_e=s=>new Function("event",`with(this){let fn=${s};return typeof fn=='function'?fn.call(this,event):fn}`);var Dt=class{attr=!1;out=!1;is},ct=new WeakMap,Ft=b(Dt,s=>t=>(e,r)=>{if(typeof r=="string")if(s.is??=t,!ct.has(e))ct.set(e,new Map([[r,s]]));else{let n=ct.get(e);n.has(r)?Object.assign(n.get(r),s):n.set(r,s)}}),Sr=Ft.attr,vr=Ft.out,Mr=Ft.is;var he=s=>nt(t=>({get current(){return s[t]},set current(e){s[t]=e}})),Nt=class extends EventTarget{#t;key;constructor(t){super(),ft.enumerable.get(()=>this.#t).set(e=>{this.#t=e,J(this,"change")})(this,"current"),Object.assign(this,t)}},at=class{ref=new Nt;constructor(t,e){Object.assign(this,t),this.ref.key=e}},wt=class extends EventTarget{items=[];listeners=new Map;#t=t=>{let e=this.construct(t);return this.listeners.set(e,_(e.ref).change(()=>J(this,"change"))),e};[Symbol.iterator](){return this.items[Symbol.iterator]()}get length(){return this.items.length}get refs(){return W(this.items,t=>t.ref.current)}createItems(t=[]){this.items=t.map(this.#t)}find(t){return this.refs.find(t)}map(t){return this.items.map(t)}push(t){let e=this.items.push(this.#t(t));return J(this,"change"),e}insertAfter(t,e){let r=this.refs.indexOf(e);if(!~r)throw new ReferenceError("Item not in ref collection.");let n=this.#t(t);return this.splice(r+1,0,n),n}splice(t,e,...r){let n=this.items.splice(t,e,...r);return J(this,"change"),n}move(t,e){let r=this.items.splice(t,1)[0];this.splice(e,0,r)}add(...t){for(let e of t)this.items.push(e);J(this,"change")}getRefItem(t){let e=this.refs.indexOf(t);if(!~e)throw new ReferenceError("Item not in ref collection.");return this.items[e]}remove(t){let e=(t instanceof at?this.items:this.refs).indexOf(t);if(!~e)throw new ReferenceError("Item not in ref collection.");return this.splice(e,1)[0]}},ce=class extends wt{#t=new Map;construct([t,e]){let r=new at(e,t);return this.#t.set(r.ref.key,r),r}constructor(t){super(),this.createItems(t)}toJSON(){return W(this.items,t=>[t.ref.key,t.ref.current?.toJSON()])}get(t){return this.#t.get(t)}},ae=class extends wt{construct(t){return new at(t)}constructor(t){super(),this.createItems(t)}toJSON(){return W(this.items,t=>t.ref.current?.toJSON())}};function ue(s,t){return typeof s=="function"?$e(s,t):(typeof s=="object"&&(t=s),e=>{let r=e,n=ct.get(e.prototype)??new Map,i=[...n].filter(([,a])=>a.attr).map(([a])=>a),o=new Map(i.map(a=>[a.toLowerCase(),a])),c=new Map,u=[...o.keys()];let l=class extends r{static get elementOptions(){return t??super.elementOptions}static get observedAttributes(){return u.concat(super.observedAttributes??[])}static get attributeKeys(){return i.concat(super.attributeKeys??[])}static get propertyMap(){return new Map([...n,...super.propertyMap??[]])}static get exposedPropertyKeys(){return[...l.propertyMap].filter(([,a])=>a.out).map(([a])=>a)}#t=!0;#e;#s=[];$;host=this;isMounted=!1;constructor(...a){super(...a),this.#t=new.target===l,this.#t&&(ft.not.enumerable(this,"_ctor",l),this.#c(),Object.assign(this,a[0]),queueMicrotask(()=>{this.#r()}))}toJSON(){return lt(this,l.exposedPropertyKeys)}_scheduleProperty(a,...h){let f=Symbol();return this._pendingProperties??=new Map,this._pendingProperties.set(f,[a,h]),f}_getPropertySettings(a){return l.propertyMap.get(a)}#n(){let a=lt(this,l.attributeKeys);for(let[h,f]of K(a)){let p=f?.constructor;if(p?.from){let E=l.propertyMap.get(h);E.is=p}let y=f==null?xt.get(String):xt.get(f)??(p?xt.get(p)??(Object.hasOwn(p.prototype,"toString")?xt.get(String):null):null);if(!y)throw new TypeError(`Attribute "${h}" is not valid type, must be either: String, Number, Boolean, null, undefined`);c.set(h,y),o.set(h.toLowerCase(),h)}this.#e=a,ze(this,a,this.#s)}#r(){this.#s.splice(0).forEach(a=>a())}#i(){D.attach(this,jt(m,["transition"])),this.host.on=m.on.bind(this,this),this.host.dispatch=m.dispatchBind(this)}#o(){let a=new Set(l.exposedPropertyKeys);this.$.effect.keys(a).task(()=>{m.dispatch.composed(this.host,"change")})}#c(){this.#i(),this.#n(),m.on(this.host).mounted(()=>{this.#r(),this.#o()}),m.on(this.host).unmounted(()=>{this.$.cleanup()}),this.$.render=this.$.effect.cb(a=>{B(a,this.root??(this.root=m.shadow(this)));return!1}),this.$.part=b(H,a=>(h,f)=>{let p,y=O=>{f=O;return p&&queueMicrotask(p),!1};return()=>(p||this.$.register(new V({fn:h,cb:y,options:a,dispose:y})),p=C,f)}),this.$.ref=he(this.$),this.created?.(this.$)}dispatchEvent(a){let h=`on${a.type}`,f=!0;if(this.#t&&Object.hasOwn(this,h)){let p=this[h];p&&(p||(p=_e(this.getAttribute(h))),f=p.call(this,a))}if(f!==!1){let p=Ut(super.constructor.prototype,h);p&&(f=p.call(this,a))}if(f!==!1){let p=Ut(super.constructor.prototype,a.type);p&&(f=p.call(this,this.$,a))}return f!==!1&&super.dispatchEvent(a),f}connectedCallback(){if(!this.#t){super.connectedCallback?.();return}super.connectedCallback?.(),this.isMounted||(this.isMounted=!0,this.host.dispatch("mounted"))}disconnectedCallback(){if(!this.#t){super.disconnectedCallback?.();return}super.disconnectedCallback?.(),queueMicrotask(()=>{this.isConnected||(this.isMounted=!1,this.host.dispatch("unmounted"))})}attributeChangedCallback(a,h,f){if(!this.#t){super.attributeChangedCallback?.(a,h,f);return}let p;if(p=o.get(a)){let{is:y}=l.propertyMap.get(p),E=this.#e[p],O=c.get(p)(f),ht=y?E!=O:!Object.is(E,O);if(ht){this.#e[p]=O,this[p]=y?this[p]==O?this[p]:y.from(O):O;this.propertyChangedCallback?.(p,E,O)}}super.attributeChangedCallback?.(a,h,f)}};return ft(l,"name",e.name),l})}var le=class{elements=d;nodes=d;firstChild=d;deep=d},De=s=>b(le,t=>(e=r=>r)=>s._scheduleProperty("fulfill",({root:r})=>n=>m.onSlotChange(r,i=>{let o;t.nodes?o=i.nodes:t.firstChild?o=[i.firstChild]:o=i.elements,t.deep&&(o=o.flatMap(c=>c instanceof HTMLSlotElement?[...c.assignedElements()]:c)),o=W(o,e),o.length?t.firstChild?n(o[0]):n(o):n(void 0)})));var Y=class extends EventTarget{static from(t){return new Y(Array.isArray(t)?t:t.toString().split(","))}stack;constructor(t){super(),this.states=t,this.stack=[t.Idle],m.on(this).change(()=>{m.dispatch(this,"statechange",this)}),this.stack.length&&m.dispatch(this,"change")}toJSON(){return this.states}get current(){return this.toString()}get isIdle(){return this.stack.length===1}toString(){return this.stack.at(-1)}is(t){return this.stack.at(-1)===t}emit(t,...e){if(!this.is(t))throw new TypeError(`Attempt to emit for "${t}" but our current state stack is "${this.stack}"`);m.dispatch(this,t,...e)}push(t,...e){if(this.is(t))throw new TypeError(`Attempt to push state "${t}" again on top of itself, our current state stack is "${this.stack}"`);this.stack=[...this.stack,t];m.dispatch(this,`${this.stack.at(-2)}pause`),m.dispatch(this,`${t}start`,...e),m.dispatch(this,"change")}pop(t,...e){if(!this.is(t))throw new TypeError(`Attempt to pop state "${t}" but our current state stack is "${this.stack}"`);if(this.stack.length===1)throw new TypeError(`Attempt to pop base state "${t}" when stack is length 1.`);this.stack=[...this.stack.slice(0,-1)];m.dispatch(this,`${t}end`,...e),m.dispatch(this,`${this.stack.at(-1)}resume`),m.dispatch(this,"change")}cancel(t,...e){if(!this.is(t))throw new TypeError(`Attempt to cancel state "${t}" but our current state stack is "${this.stack}"`);if(this.stack.length===1)throw new TypeError(`Attempt to cancel base state "${t}" when stack is length 1.`);this.stack=[...this.stack.slice(0,-1)];m.dispatch(this,`${t}cancel`,...e),m.dispatch(this,`${this.stack.at(-1)}resume`),m.dispatch(this,"change")}swap(t,...e){if(this.stack.length===1)throw new TypeError(`Attempt to swap base state "${t}" when stack is length 1.`);let r=this.current;this.stack=[...this.stack.slice(0,-1),t];m.dispatch(this,`${r}cancel`),m.dispatch(this,`${this.stack.at(-1)}start`,...e),m.dispatch(this,"change")}returnToIdle(){for(;!this.isIdle;)this.cancel(this.current,void 0)}states};var Q=class extends String{static create(t,e,r){return new Q(t,e,r)}group;get value(){return""+this}get index(){return this.source.index}source;constructor(t,e,r){super(typeof t=="object"?t.value:t),typeof t=="object"&&(e=t.group,r=Object.assign(t.source.match,{index:t.source.index,input:t.source.input})),this.group=e,Object.defineProperty(this,"source",{enumerable:!1,value:r})}toJSON(){return{value:this.value,group:this.group,source:{match:this.source.slice(),index:this.source.index,input:this.source.input}}}is(t,e){return t==this.group&&(e==null||e==this.value)}as(t,e=this.group){return Q.create(t,e,this.source)}};var Fe=s=>s[1]!=null;var qt=s=>{if(!s||s.index==null)return null;if(!s.groups)throw new TypeError("RegExp match is missing named groups such as: /(?<group>[a-z])/");let t=Object.entries(s.groups).find(Fe);return t?Q.create(t[1],t[0],s):null};var Ne=class extends RegExp{[Symbol.match](t){let e=RegExp.prototype[Symbol.match].call(this,t);return qt(e)}*[Symbol.matchAll](t){let e=RegExp.prototype[Symbol.matchAll].call(this,t);for(let r of e)yield qt(r)}};var qe=s=>new RegExp(s.map(t=>t.toString()).map(t=>t.slice(t.indexOf("/")+1,t.lastIndexOf("/"))).join("|"),"gi");var Ie=(...s)=>{let t=qe(s);return e=>{let r=e.matchAll(t),n=()=>qt(r.next().value);return Object.defineProperty(n,Symbol.iterator,{value:function*(o){for(;o=n();)yield o}}),n}};var Er=/\s+/g,Ar=Ie(/(?<open>\s*\{\s*)/,/(?<close>\s*\}\s*)/,/(?<comment>\/\*[^]*?\*\/)/,/\s*(?<rule>[^{;}/'"]+)\s+?(?={)/,/\s*(?<string>'.*?'|".*?")(?=;)/,/\s*(?<prop>[^:;/]+)(?=:)/,/\s*(?<value>[^:;]+)(?=;)/);function fe(s){s=s.replace(Er," ");let t=Ar(s),r=(i=>()=>{let o;for(;(o=t())&&i.includes(o.group););return o})(["comment"]),n=(i={})=>{let o;for(;o=r();){let{value:c,group:u}=o;switch(u){case"rule":r(),n(i[c.trim()]??={});break;case"prop":i[c.trim()]=r()?.value?.trim();break;case"close":return i}}return i};return n()}function Ke(s,t){let e="";for(let r=0;r<s.length;r++)e+=s[r],e+=t[r];return e}function Be(s){return s.replace(/[A-Z]/g,(t,e)=>(e?"-":"")+t).toLowerCase()}var jr=(s,t)=>t?`${t}{${s}}`:s,Lr=(s,t,e)=>`${s}{${Be(t)}:${e}}`,Tr=(s,t)=>[...s.matchAll(/[\w-]+|./g)].flat().map(e=>t?.get(e)??e).join("");function pe(s,t,e){t??="";let r="",n=(i,o="",c="")=>{for(let u in i){let l=i[u];if(typeof l=="object"){let a=/^@/.test(u)?u:null,h=/%$/.test(u),f=o;h?f=u:a||(f=u.split(",").map(p=>p.trim()).map(p=>o.split(",").map(y=>(y+(/^&/.test(p)?p.slice(1):" "+p)).trim()).join(",")).map(p=>p.trim()).join(",")),n(l,f,a||c)}else{let a=jr(Lr(o?Tr(o,e):t,u,l),c);r+=`
`+a.trim()}}};return n({[t]:s}),r.trim()}function kr(s,...t){let e=Ke(s,t),r=fe(e);function n(i=":host",o){return pe(r,i,o)}return n.valueOf=n,n}function bt(s,t){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var r=e.call(s),n,i=[],o;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return i}function It(s,t,e){if(e||arguments.length===2)for(var r=0,n=t.length,i;r<n;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return s.concat(i||Array.prototype.slice.call(t))}var Cr=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=function(r){return r.apply(void 0,It([],bt(s),!1))};return e.to=e,e};function Pr(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=bt(s),r=e[0],n=e.slice(1);return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.reduce(function(c,u){return u(c)},r.apply(void 0,It([],bt(i),!1)))}}function Ge(s,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return Cr(s).to(Pr.apply(void 0,It([t],bt(e),!1)))}var S;(function(s){s[s.None=0]="None",s[s.Left=1]="Left",s[s.Top=2]="Top",s[s.Right=4]="Right",s[s.Bottom=8]="Bottom",s[s.Inside=16]="Inside"})(S||(S={}));var P=class{x;y;get left(){return this.x}set left(t){this.x=t}get top(){return this.y}set top(t){this.y=t}get bottom(){return this.y}set bottom(t){this.y=t}get right(){return this.x}set right(t){this.x=t}setLeft(t){return this.x=t,this}setTop(t){return this.y=t,this}clone(){let t=this.constructor;return new t(this)}toJSON(){return this}draw(t="red",e="absolute"){let r=document.createElement("div");return Object.assign(r.style,{position:e,boxSizing:"border-box",border:"1px solid "+t,...this.toStyle(),zIndex:1e3}),document.body.appendChild(r),r}screen(t=this){return this.clone().screenSelf(t)}screenSelf(t=this){return this.translateSelf(t.negate())}negate(){return this.clone().negateSelf()}negateSelf(){return this.x=-this.x,this.y=-this.y,this}contain(t){return this.clone().containSelf(t)}containSelf(t){return this.top<t.top?this.top=t.top:this.bottom>t.bottom&&(this.bottom=t.bottom),this.right>t.right?this.right=t.right:this.left<t.left&&(this.left=t.left),this}scale(t=0,e=t){return this.clone().scaleSelf(t,e)}scaleSelf(t=0,e=t){return typeof t=="object"?(this.width*=t.width,this.height*=t.height):(this.width*=t,this.height*=e),this}scaleLinear(t=0,e=t){return this.clone().scaleLinearSelf(t,e)}scaleLinearSelf(t=0,e=t){return typeof t=="object"?(this.width+=t.width,this.height+=t.height):(this.width+=t,this.height+=e),this}zoomLinear(t=0,e=t){return this.clone().zoomLinearSelf(t,e)}zoomLinearSelf(t=0,e=t){return t instanceof P?this.scaleLinearSelf(t).translateSelf(t.scale(-.5)):this.scaleLinearSelf(t,e).translateSelf(t*-.5,e*-.5),this}add(t=0,e=t){return this.translate(t,e)}addSelf(t=0,e=t){return this.translateSelf(t,e)}sub(t=0,e=t){return this.clone().subSelf(t,e)}subSelf(t=0,e=t){return typeof t=="object"?this.translateSelf(t.negate()):this.translateSelf(-t,-e)}translate(t=0,e=t){return this.clone().translateSelf(t,e)}translateSelf(t=0,e=t){return typeof t=="object"?(this.x+=t.x||0,this.y+=t.y||0):(this.x+=t,this.y+=e),this}touchPoint(t,e=this.center??this){let r=this instanceof R?this:new g(1,1),n=this.intersectPoint(t,e).translateSelf(t.center),i=n.x-r.width*.5,o=n.y-r.height*.5;return new g(i,o)}intersectPoint(t,e=this.center??this){let r=this instanceof R?this:new g(1,1),n=(r.width+t.width)*.5,i=(r.height+t.height)*.5,o=e.screen(t.center),c=i/n,u=Math.abs(o.y/o.x),l=Math.sign(o.x),a=Math.sign(o.y),h,f;return u>c?(h=i/u*l,f=i*a):(h=n*l,f=n*u*a),new g(h,f)}toStylePosition(){return{left:this.x+"px",top:this.y+"px"}}toStylePositionPct(){return{left:this.x*100+"%",top:this.y*100+"%"}}toStyleSize(){return{width:this.width+"px",height:this.height+"px"}}toStyleSizePct(){return{width:this.width*100+"%",height:this.height*100+"%"}}toStyle(){return{...this.toStylePosition(),...this.toStyleSize()}}toStylePct(){return{...this.toStylePositionPct(),...this.toStyleSizePct()}}toCSSStyle(){return Object.entries(this.toStyle()).map(([t,e])=>`${t}: ${e};`).join(`
`)}toPositionObject(){return{x:this.x,y:this.y}}toSizeObject(){return{width:this.width,height:this.height}}};var T,St,vt,Mt,Ot,F=class extends P{constructor(e=0,r=e,n=e,i=r){super();k(this,"x");k(this,"y");k(this,"width");k(this,"height");tt(this,T,!0);tt(this,St,void 0);tt(this,vt,void 0);tt(this,Mt,void 0);tt(this,Ot,void 0);typeof e=="object"?Object.assign(this,F.fromObject(e.toJSON?e.toJSON():e)):(this.x=e,this.y=r,this.width=n,this.height=i)}static fromElement(e){return e.rect?e.rect.clone():new F(+(e.dataset.x??e.offsetLeft),+(e.dataset.y??e.offsetTop),+(e.dataset.width??e.offsetWidth),+(e.dataset.height??e.offsetHeight))}static fromObject(e){return new F(e.x??e.width,e.y??e.height,e.width??0,e.height??0)}static fromPoints(e,r){return new F(e.x,e.y,r.x-e.x,r.y-e.y)}static fromUnsortedPoints(e,r){let n=new g(Math.min(e.x,r.x),Math.min(e.y,r.y)),i=new g(Math.max(e.x,r.x),Math.max(e.y,r.y));return new F(n.x,n.y,i.x-n.x,i.y-n.y)}static combine(e){let r=Math.min(...e.map(i=>i.x)),n=Math.min(...e.map(i=>i.y));return new F(r,n,Math.max(...e.map(i=>i.right))-r,Math.max(...e.map(i=>i.bottom))-n)}static compare(e,r){return e?.equals(r)??!1}[Symbol.iterator](){return[this.x,this.y,this.width,this.height][Symbol.iterator]()}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}toSVGPath(){return`M ${this.x} ${this.y} h ${this.width} v ${this.height} h ${-this.width} v ${-this.height}`}toString(){return`${this.x} ${this.y} ${this.width} ${this.height}`}draw(e="red",r="absolute"){let n=document.createElement("div");return Object.assign(n.style,{position:r,pointerEvents:"none",boxSizing:"border-box",border:"1px solid "+e,...this.toStyle(),zIndex:1e3}),document.body.appendChild(n),n}set(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,L(this,T,!0),this}setWidth(e){return this.width=e,this}setHeight(e){return this.height=e,this}setPosition(e){return this.x=e.x,this.y=e.y,L(this,T,!0),this}setSize(e){return this.width=e.width,this.height=e.height,L(this,T,!0),this}get points(){return[new g(this.x,this.y),new g(this.right,this.y),new g(this.right,this.bottom),new g(this.x,this.bottom)]}get pos(){return new g(this.x,this.y)}get position(){return this.pos}get size(){return new g(this.width,this.height)}get center(){return new g(this.x+this.width*.5,this.y+this.height*.5)}get topLeft(){return this.pos}get topRight(){return new g(this.right,this.top)}get bottomLeft(){return new g(this.x,this.bottom)}get bottomRight(){return this.pos.translate(this.size)}get right(){return this.x+this.width}set right(e){this.x=e-this.width}get bottom(){return this.y+this.height}set bottom(e){this.y=e-this.height}maybeCalculateLines(){Z(this,T)&&(L(this,St,new j(this.topLeft,this.bottomLeft)),L(this,vt,new j(this.topLeft,this.topRight)),L(this,Mt,new j(this.topRight,this.bottomRight)),L(this,Ot,new j(this.bottomLeft,this.bottomRight)),L(this,T,!1))}get leftLine(){return this.maybeCalculateLines(),Z(this,St)}get topLine(){return this.maybeCalculateLines(),Z(this,vt)}get rightLine(){return this.maybeCalculateLines(),Z(this,Mt)}get bottomLine(){return this.maybeCalculateLines(),Z(this,Ot)}interpolate(e,r){return this.clone().interpolateSelf(e,r)}interpolateSelf(e,r){return this.x=this.x+(e.x-this.x)*r,this.y=this.y+(e.y-this.y)*r,this.width=this.width+(e.width-this.width)*r,this.height=this.height+(e.height-this.height)*r,this}round(){return this.clone().roundSelf()}roundSelf(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),L(this,T,!0),this}multiply(e=0,r=e,n=e,i=r){return this.clone().multiplySelf(e,r,n,i)}multiplySelf(e=0,r=e,n=e,i=r){return e instanceof P?(this.x*=e.x,this.y*=e.y,this.width*=e.width,this.height*=e.height):(this.x*=e,this.y*=r,this.width*=n,this.height*=i),L(this,T,!0),this}transform(e){return this.clone().transformSelf(e)}transformSelf(e){let{x:r,y:n,width:i,height:o}=this,{a:c,b:u,c:l,d:a,e:h,f}=e;return this.x=c*r+l*n+h,this.y=u*r+a*n+f,this.width=c*i+l*o,this.height=u*i+a*o,L(this,T,!0),this}normalize(e){return this.clone().normalizeSelf(e)}normalizeSelf(e){return e instanceof DOMMatrix?this.transformSelf(e.inverse()):(this.x-=e.left,this.y-=e.top,this.x/=e.width,this.y/=e.height,this.width/=e.width,this.height/=e.height),L(this,T,!0),this}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}intersectionRect(e){return(this.bottom-.75>=e.top?S.Top:0)+(this.top+.75<=e.bottom?S.Bottom:0)+(this.right-.75>=e.left?S.Left:0)+(this.left+.75<=e.right?S.Right:0)}intersectsRect(e){return!(this.bottom-.75<e.top||this.top+.75>e.bottom||this.right-.75<e.left||this.left+.75>e.right)}withinRect(e){return this.left>=e.left&&this.right<=e.right&&this.top>=e.top&&this.bottom<=e.bottom}distanceRect(e){let r=0,n=0;return this.right<e.left?r=e.left-this.right:this.left>e.right?r=this.left-e.right:r=Math.abs(this.center.x-e.center.x),this.bottom<e.top?n=e.top-this.bottom:this.top>e.bottom?n=this.top-e.bottom:n=Math.abs(this.center.y-e.center.y),new g(r,n)}collisionResponse(e){return this.intersectPoint(e).addSelf(e.center).subSelf(this.center)}place(e,r){return this.clone().placeSelf(e,r)}placeSelf(e,r){return r.includes("n")?this.y=e.top-this.height:r.includes("s")?this.y=e.bottom:this.y=e.center.y-this.height*.5,r.includes("w")?this.x=e.left-this.width:r.includes("e")?this.x=e.right:this.x=e.center.x-this.width*.5,r.includes("r")&&(this.x+=this.width),r.includes("l")&&(this.x-=this.width),L(this,T,!0),this}},R=F;T=new WeakMap,St=new WeakMap,vt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,k(R,"boundingRect",F.combine);var A=class extends DOMMatrix{constructor(t){typeof t=="string"?super(t.split("(")[1].split(")")[0].split(",").map(parseFloat)):Array.isArray(t)?super(t):t instanceof DOMMatrix?super(t.toFloat64Array()):typeof t=="object"?super(Object.values(t)):super(t)}flipX(){return new A(super.flipX())}flipY(){return new A(super.flipY())}inverse(){return new A(super.inverse())}multiply(t){return new A(super.multiply(t))}rotate(t,e,r){return new A(super.rotate(t,e,r))}rotateAxisAngle(t,e,r,n){return new A(super.rotateAxisAngle(t,e,r,n))}rotateFromVector(t,e){return new A(super.rotateFromVector(t,e))}scale(t,e,r,n,i,o){return new A(super.scale(t,e,r,n,i,o))}scaleSelf(t,e,r,n,i,o){return super.scaleSelf(t,e,r,n,i,o),this}scale3d(t,e,r,n){return new A(super.scale3d(t,e,r,n))}skewX(t){return new A(super.skewX(t))}skewY(t){return new A(super.skewY(t))}translate(t,e,r){return new A(super.translate(t,e,r))}translateSelf(t,e,r){return super.translateSelf(t,e,r),this}clone(){return new A(this)}toJSON(){return this.toFloat64Array()}};var N=class{static interpolate(t,e,r){return t+(e-t)*r}static radiansToDegrees(t){return t*180/Math.PI}static degreesToRadians(t){return t*Math.PI/180}static clamp(t,e,r){return Math.max(t,Math.min(e,r))}x;constructor(t=0){this.x=t}scaleSelf(t){return this.x*=t,this}normalizeSelf(t){return t instanceof A?this.x=(this.x-t.e)/t.a:typeof t=="number"&&(this.x/=t),this}transformSelf(t){let{x:e}=this,{a:r,e:n}=t;return this.x=r*e+n,this}};var g=class extends P{static fromElement(t){return new g(+(t.dataset.left??t.offsetLeft),+(t.dataset.top??t.offsetTop))}static fromObject(t){return new g(t.x??t.width,t.y??t.height)}static fromMatrix(t){return new g(t.e,t.f)}static fromAngle(t){return new g(Math.cos(t),Math.sin(t))}static fromAngleDegrees(t){return g.fromAngle(N.degreesToRadians(t))}static compare(t,e){return t?.equals(e)??!1}x;y;constructor(t=0,e=t){super(),typeof t=="object"?Object.assign(this,g.fromObject(t.toJSON?t.toJSON():t)):(this.x=t,this.y=e)}[Symbol.iterator](){return[this.x,this.y][Symbol.iterator]()}toString(){return`${this.x} ${this.y}`}set(t){return this.x=t.x,this.y=t.y,this}draw(t="yellow",e="absolute"){let r=document.createElement("div");return Object.assign(r.style,{position:e,boxSizing:"border-box",border:"1px solid "+t,...this.toStylePosition(),width:"2px",height:"2px",zIndex:1e3}),document.body.appendChild(r),r}get pos(){return new g(this.x,this.y)}get position(){return this.pos}get size(){return new g(this.width,this.height)}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}interpolate(t,e){return this.clone().interpolateSelf(t,e)}interpolateSelf(t,e){return this.x=this.x+(t.x-this.x)*e,this.y=this.y+(t.y-this.y)*e,this}diff(t){return this.clone().diffSelf(t)}diffSelf(t){return this.x-=t.x,this.y-=t.y,this}abs(){return this.clone().absSelf()}absSelf(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}square(){return this.clone().squareSelf()}squareSelf(){return this.x*=this.x,this.y*=this.y,this}sum(){return this.x+this.y}manhattan(t){return this.diff(t).absSelf().sum()}octile(t){let e=this.diff(t).absSelf(),r=Math.SQRT2-1;return e.x<e.y?r*e.x+e.y:r*e.y+e.x}max(){return Math.max(this.x,this.y)}min(){return Math.min(this.x,this.y)}clampSelf(t,e){return this.x<t?this.x=t:this.x>e&&(this.x=e),this.y<t?this.y=t:this.y>e&&(this.y=e),this}clampMinSelf(t){return this.x<t&&(this.x=t),this.y<t&&(this.y=t),this}chebyshev(t){return this.diff(t).absSelf().max()}euclidean(t){return this.distance(t)}distance(t){return this.diff(t).mag()}mag(){return Math.hypot(this.x,this.y)}length(){return this.mag()}unit(){return this.scale(1/this.mag())}dot(t){return new j(this,t).dot()}normal(){return new g(this.y,-this.x)}angleTo(t){return new j(this,t).angle()}round(){return this.clone().roundSelf()}roundSelf(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}precisionRound(t=1){return this.clone().precisionRoundSelf(t)}precisionRoundSelf(t=1){return this.x=Math.round(this.x*t)/t,this.y=Math.round(this.y*t)/t,this}gridRound(t=1){return this.clone().gridRoundSelf(t)}gridRoundSelf(t=1){return this.x=Math.round(this.x/t)*t,this.y=Math.round(this.y/t)*t,this}absoluteSum(){return Math.abs(this.x)+Math.abs(this.y)}withinRect(t){return this.x>=t.left&&this.x<=t.right&&this.y>=t.top&&this.y<=t.bottom}transform(t){return this.clone().transformSelf(t)}transformSelf(t){let{x:e,y:r}=this,{a:n,b:i,c:o,d:c,e:u,f:l}=t;return this.x=n*e+o*r+u,this.y=i*e+c*r+l,this}multiply(t=0,e=t){return this.clone().multiplySelf(t,e)}multiplySelf(t=0,e=t){return t instanceof P?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e),this}normalize(t,e=t){return this.clone().normalizeSelf(t,e)}normalizeSelf(t=this.mag(),e=t){return t instanceof DOMMatrix?(this.x=(this.x-t.e)/t.a,this.y=(this.y-t.f)/t.d):t instanceof R?(this.x=(this.x-t.x)/t.width,this.y=(this.y-t.y)/t.height):typeof t=="number"?(this.x/=t,this.y/=e):(this.x/=t.x,this.y/=t.y),this}equals(t){return this.x===t.x&&this.y===t.y}equalsAny(t){return this.x===t.x||this.y===t.y}};g.prototype.absSum=g.prototype.absoluteSum;var j=class{p1;p2;constructor(t,e){t.p1?(this.p1=new g(t.p1),this.p2=new g(t.p2)):(this.p1=t,this.p2=e)}[Symbol.iterator](){return this.points[Symbol.iterator]()}get points(){return[this.p1,this.p2]}angle(){let t=this.p2.x-this.p1.x,e=this.p2.y-this.p1.y;return Math.atan2(e,t)}angleDegrees(){return N.radiansToDegrees(this.angle())}clone(){let t=this.constructor;return new t(this)}mag(){return this.p1.distance(this.p2)}dot(){return this.p1.x*this.p2.x+this.p1.y*this.p2.y}intersectionRect(t){let e=this.p1,r=this.p2;return(this.intersectsLine(t.leftLine)?S.Left:0)+(this.intersectsLine(t.topLine)?S.Top:0)+(this.intersectsLine(t.rightLine)?S.Right:0)+(this.intersectsLine(t.bottomLine)?S.Bottom:0)+(e.withinRect(t)&&r.withinRect(t)?S.Inside:0)}intersectsRect(t){let e=this.p1,r=this.p2;return this.intersectsLine(t.leftLine)?S.Left:this.intersectsLine(t.topLine)?S.Top:this.intersectsLine(t.rightLine)?S.Right:this.intersectsLine(t.bottomLine)?S.Bottom:e.withinRect(t)&&r.withinRect(t)?S.Inside:S.None}intersectsLine(t){let e=this.p1,r=this.p2,n=t.p1,i=t.p2,o=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),c=(r.x-e.x)*(i.y-n.y)-(r.y-e.y)*(i.x-n.x);if(c==0)return!1;let u=o/c;o=(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y);let l=o/c;return!(u<0||u>1||l<0||l>1)}getLineToRectangleCollisionResponse(t,e){if(t===S.None)return this;let r=this.p1,n=this.p2,i=r.clone(),o=n.clone(),c=e.topLeft,u=e.bottomRight;if(t&S.Left&&(i.x=c.x-1),t&S.Top&&(i.y=c.y-1),t&S.Right&&(o.x=u.x+1),t&S.Bottom&&(o.y=u.y+1),t&S.Inside){let a=r.interpolate(n,.5).touchPoint(e);i.x=a.x,i.y=a.y,o.x=a.x,o.y=a.y}return new j(i,o)}translate(t=0,e=t){return this.clone().translateSelf(t,e)}translateSelf(t=0,e=t){return this.p1.translateSelf(t,e),this.p2.translateSelf(t,e),this}};var q=class{static fromPoints(t){return new q(t.slice(0,-1).map((e,r)=>{let n=t[r+1];return new j(e,n)}))}lines;constructor(t){t.lines?this.lines=t.lines:this.lines=t}get normals(){let t=this.lines.map(n=>n.mag()),e=t.reduce((n,i)=>n+i,0);return t.map(n=>n/e)}get path(){let t=[];for(let e of this.lines)t.push(e.p1);return t.push(this.lines.at(-1).p2),new x(t)}get length(){return this.lines.reduce((t,e)=>t+e.mag(),0)}chopAt(t){let e=[];for(let[r,n]of this.lines.entries())if(e.push(n.p1),r===t){let i=n.p1.interpolate(n.p2,.5);e.push(i)}return e.push(this.lines.at(-1).p2),this.lines=q.fromPoints(e).lines,this}};var x=class{static toSVGPath(t){return(t.length?t:[[0,0]]).reduce((e,r)=>{let n=e.at(-1);return n.length===3&&(n=["L"],e.push(n)),n.push(...r),e},[["M"]]).flat(1/0).join(" ")}static sum(t){return t.reduce((e,r)=>(e.x+=r.x,e.y+=r.y,e),new g)}static absSum(t){return t.reduce((e,r)=>(e.x+=Math.abs(r.x),e.y+=Math.abs(r.y),e),new g)}static screen(t,e){return t.map((r,n)=>r.screen(e[n]))}static mag(t){return t.reduce((e,r)=>e+r.mag(),0)}static rope(t,e=1){let r=t[0].clone(),n=t.at(-1).clone(),o=q.fromPoints(t).lines.map(y=>y.mag()),c=o.reduce((y,E)=>y+E,0),u=o.map(y=>y/c),l=t.slice().map(y=>y.clone()),a=t.length,h=a-1,f=h/a,p=n.clone();for(let y=h;y--;){let E=(y+1)/h,O=l[y],ht=u[Math.ceil(y*f)],Et=p.screen(O).scale(ht).scale(E**e);p.translateSelf(Et.negate()),O.translateSelf(Et),p=O}return l[0]=r.clone(),l[t.length-1]=n.clone(),l}static chop(t,e=35,r=240){let n=t[0].clone(),i=t.at(-1).clone(),o=q.fromPoints(t),c=[],u;for(let l of o.lines){let a=l.mag();if(a>e?u=c.push(l.p1):u&&c[u-1].translateSelf(l.p1.screen(c[u-1]).scale(.5)),a>r){let h=l.p2.screen(l.p1),f=l.p1.translate(h);u=c.push(f)}}return c[0]=n.clone(),c.push(i.clone()),c}static morph(t,e,r,n){let[i,o,c]=$.coeffs(e,r),u=t(e,r);return n<1?Array.from({length:i},(l,a)=>{let h=Math.round(a*o),f=Math.round(a*c);return u(h,f,n)}):r}static resample(t,e,r){let i=t.length-1,o=t[Math.min(e,i)],c=t[Math.max(0,e-1)],u=t[Math.min(e+1,i)];return o.interpolate(c.interpolate(o,r).translateSelf(o.interpolate(u,1-r)).scale(.5),r)}static fit(t,e){let r=t.length,n=r-1,i=r/e;return Array.from({length:e},(c,u)=>{let l=Math.round(u*i),a=t[Math.min(l,n)],h=t[Math.max(0,l-1)],f=t[Math.min(l+1,n)];return a.interpolate(h.interpolate(a,1).translateSelf(a.interpolate(f,0)).scale(.5),.5)})}static resampleSpline(t,e,r){let i=t.length-1,o=t[Math.max(0,e-2)],c=t[Math.max(0,e-1)],u=t[Math.min(e,i)],l=t[Math.min(e+1,i)],a=t[Math.min(e+2,i)],h=t[Math.min(e+3,i)],f=u.x+.04166666666*r*((l.x-c.x)*16+(o.x-a.x)*2+r*((l.x+c.x)*16-o.x-u.x*30-a.x+r*(l.x*66-u.x*70-a.x*33+c.x*39+h.x*7-o.x*9+r*(u.x*126-l.x*124+a.x*61-c.x*64-h.x*12+o.x*13+r*((l.x-u.x)*50+(c.x-a.x)*25+(h.x-o.x)*5))))),p=u.y+.04166666666*r*((l.y-c.y)*16+(o.y-a.y)*2+r*((l.y+c.y)*16-o.y-u.y*30-a.y+r*(l.y*66-u.y*70-a.y*33+c.y*39+h.y*7-o.y*9+r*(u.y*126-l.y*124+a.y*61-c.y*64-h.y*12+o.y*13+r*((l.y-u.y)*50+(c.y-a.y)*25+(h.y-o.y)*5)))));return new g(f,p)}static resampleCubic(t,e,r){let i=t.length-1,o=e+r|0,c=t[Math.min(Math.max(0,o-1),i)],u=t[Math.min(o,i)],l=t[Math.min(o+1,i)],a=t[Math.min(o+2,i)],h=(3*(u.x-l.x)-c.x+a.x)*.5,f=2*l.x+c.x-(5*u.x+a.x)*.5,p=(l.x-c.x)*.5,y=((h*r+f)*r+p)*r+u.x,E=(3*(u.y-l.y)-c.y+a.y)*.5,O=2*l.y+c.y-(5*u.y+a.y)*.5,ht=(l.y-c.y)*.5,Et=((E*r+O)*r+ht)*r+u.y;return new g(y,Et)}static boundingRect(t){let e=Math.min(...t.map(o=>o.x)),r=Math.min(...t.map(o=>o.y)),n=Math.max(...t.map(o=>o.x)),i=Math.max(...t.map(o=>o.y));return new R(e,r,n-e,i-r)}static sat(t,e){let r=Number.MAX_VALUE,n=new g;for(let i of[t,e])for(let o=0;o<i.points.length;o++){let c=i.points[o],l=i.points[(o+1)%i.points.length].sub(c).normal().unit(),a=Number.MAX_VALUE,h=-Number.MAX_VALUE;for(let E=0;E<t.points.length;E++){let O=t.points[E].dot(l);a=Math.min(a,O),h=Math.max(h,O)}let f=Number.MAX_VALUE,p=-Number.MAX_VALUE;for(let E=0;E<e.points.length;E++){let O=e.points[E].dot(l);f=Math.min(f,O),p=Math.max(p,O)}let y=Math.min(h,p)-Math.max(a,f);if(y<0)return null;if(y<Math.abs(r)){let E=p-a,O=f-h;r=Math.abs(E)<Math.abs(O)?E:O,n=l.scale(r)}}return n}points;constructor(t=[]){Array.isArray(t)?this.points=t:this.points=t.points}get length(){return this.points.length}get forEach(){return this.points.forEach.bind(this.points)}get slice(){return this.points.slice.bind(this.points)}toSVGPath(){return x.toSVGPath(this.points)}screen(t){return new x(x.screen(this.points,Array.isArray(t)?t:t.points))}mag(){return x.mag(this.points)}absSum(){return x.absSum(this.points).absSum()}translateSelf(t){let e=Array.isArray(t)?t:t.points;return this.points.forEach((r,n)=>{r.translateSelf(e[n])}),this}chop(t,e){return new x(x.chop(this.points,t,e))}chopSelf(t,e){return this.points=x.chop(this.points,t,e),this}fit(t){return new x(x.fit(this.points,t))}fitSelf(t){return this.points=x.fit(this.points,t),this}rope(t){return new x(x.rope(this.points,t))}ropeSelf(t){return this.points=x.rope(this.points,t),this}boundingRect(){return x.boundingRect(this.points)}};var $=class{};k($,"coeffs",(t,e)=>{let r=t.length,n=e.length,i=Math.max(r,n),o=r/i,c=n/i;return[i,o,c,r,n]}),k($,"Nearest",(t,e)=>{let r=t.length-1,n=e.length-1;return(i,o,c)=>{let u=t[Math.min(i,r)],l=e[Math.min(o,n)];return u.interpolate(l,c)}}),k($,"Linear",(t,e)=>(r,n,i)=>{let o=x.resample(t,r,.5),c=x.resample(e,n,.5);return o.interpolate(c,i)}),k($,"Cubic",(t,e)=>(r,n,i)=>{let o=x.resampleCubic(t,r,.5),c=x.resampleCubic(e,n,.5);return o.interpolate(c,i)}),k($,"Spline",(t,e)=>(r,n,i)=>{let o=x.resampleSpline(t,r,.5),c=x.resampleSpline(e,n,.5);return o.interpolate(c,i)});var Rr=(s,t,e)=>{if(s.length<1)return"M 0 0";e==null&&(e=1);let r=s.length-(t?0:1),n=[`M ${s[0]} C`];for(let i=0;i<r;i++){let o,c,u,l;t?(o=s[(i-1+r)%r],c=s[i],u=s[(i+1)%r],l=s[(i+2)%r]):(o=i==0?s[0]:s[i-1],c=s[i],u=s[i+1],l=i==r-1?u:s[i+2]);let a=c.x+(u.x-o.x)/6*e,h=c.y+(u.y-o.y)/6*e,f=u.x-(l.x-c.x)/6*e,p=u.y-(l.y-c.y)/6*e;n.push(a,h,f,p,u.x,u.y)}return t&&n.push("z"),n.join(" ")};var me=class{x;y;z;constructor(t=0,e=t,r=t){this.x=t,this.y=e,this.z=r}[Symbol.iterator](){return[this.x,this.y,this.z][Symbol.iterator]()}toString(){return`${this.x} ${this.y} ${this.z}`}set(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}interpolate(){return N.interpolate(this.y,this.x,this.z)}};var He=/Mobi|Android|Tablet/i.test(navigator.userAgent);var de={};At(de,{observed:()=>$r});var $r=()=>m.mixin(s=>class extends s{#t;#e;#s;#n;get offsetLeft(){return this.#t}get offsetTop(){return this.#e}get offsetWidth(){return this.#s}get offsetHeight(){return this.#n}#r(){this.#t=super.offsetLeft,this.#e=super.offsetTop,this.#s=super.offsetWidth,this.#n=super.offsetHeight}rect=new m.Rect;pos=m(this).reduce(({$:e,rect:r})=>e.pos?.equals(r.pos)?e.pos:r.pos);size=m(this).reduce(({$:e,rect:r})=>e.size?.equals(r.size)?e.size:r.size);get ownRect(){this.#r();let e=m.getElementOffset(this);return new m.Rect(e.x,e.y,this.offsetWidth,this.offsetHeight)}mounted(e){e.rect=e.fulfill(({host:r})=>n=>{let i=()=>n(r.ownRect);i(),e.observe.resize(r,i)})}});var Ve=(s,t,e)=>s?.forEach(r=>t.observe(r,e)),ge=s=>s?.map(t=>{let e=t.textContent;return e.trim().length?e:""}).join("")??"",We=s=>({get nodes(){return s.map(t=>t.assignedNodes()).flat(1/0)},get elements(){return s.map(t=>t.assignedElements()).flat(1/0)},get firstChild(){return this.elements[0]}}),Je=(s,t,e=r=>r instanceof HTMLSlotElement?[r]:[...r.querySelectorAll("slot")])=>_(s,"slotchange")(()=>t(We(e(s)))),zr=(s,t,e)=>{let r,n=Je(s,({nodes:i})=>{r?.disconnect(),i.length&&(r=new MutationObserver(()=>t(ge(i))),Ve(i,r,{characterData:!0}),t(ge(i)))},e);return()=>(r?.disconnect(),n())};var _r=(s,t=1/0)=>{let e=0,r=0;do e+=s.offsetLeft-s.scrollLeft,r+=s.offsetTop-s.scrollTop;while(t--&&(s=s.offsetParent));return{x:e,y:r}};var Dr=(s,t)=>{for(let e in t)s.dataset[e]=t[e].toString()};var Fr=(s,t)=>{let e=s;for(;e=e.parentElement;)if(t(e))return e};var Ue=(s=document.activeElement)=>s?.shadowRoot?Ue(s.shadowRoot.activeElement)??s:s;var Nr=(...s)=>t=>{let e=[t.shiftKey&&"shift",t.altKey&&"alt",t.ctrlKey&&"ctrl",t.metaKey&&"meta",(t.ctrlKey||t.metaKey)&&"cmd",t.key.replace("Arrow","").toLowerCase()].filter(Boolean);for(let[r,n]of s)if(r.every(i=>e.includes(i.toLowerCase())))return t.preventDefault(),t.stopPropagation(),n(t)};var qr={resize:(s,t)=>{let e=new ResizeObserver(t);return e.observe(s),()=>e.disconnect()},gc:(s,t,e)=>{let r=new FinalizationRegistry(e);return r.register(s,t),r}};var Ir=(s,t,e=250)=>{let r=0,n=new Set,i=o=>{n.delete(o.pointerId)};return se(_(s).pointerdown(o=>{if(o.buttons&re.Left&&(n.add(o.pointerId),!(n.size>1))){if(o.timeStamp-r<e){o.stopPropagation(),t();return}r=o.timeStamp}}),_(window).pointerup(i),_(window).pointercancel(i))};var Kr=(s,t="",e="")=>{let r=s.attachShadow(typeof t=="object"?t:{mode:"open"});return r.innerHTML=typeof t=="string"?t:e,r};var Kt=class{immediate=d;expire=d;expireAfter=0;locked=d;pop=d;drop=d},Bt=class extends EventTarget{static from(){throw new TypeError("Transition cannot be recreated by its string representation.")}#t;#e;#s;#n;#r;constructor(t,e){super(),this.state=t,this.AnimSettings=e,this.#t=0,this.#e=0,this.#r=!1,this.to=b(Kt,r=>(n,i)=>{if(this.#r)return;let o=performance.now();o<this.#e||(clearTimeout(this.#n),clearTimeout(this.#s),o>this.#t||r.immediate?this.#o(r,n,i):this.#s=setTimeout(()=>{this.#o(r,n,i)},this.#t-o))}),m.on(t).change(()=>{this.dispatchEvent(new CustomEvent("change"))})}get animSettings(){return this.AnimSettings[this.state.current]??this.AnimSettings[this.state.states.Idle]}#i(t){clearTimeout(this.#n),this.#n=setTimeout(()=>{requestAnimationFrame(()=>{this.#e=0,this.state.isIdle||this.state.pop(this.state.current),t&&requestAnimationFrame(t)})},this.AnimSettings[this.state.current]?.duration||200)}#o(t,e,r){let n=performance.now();e===this.state.states.Idle?this.#i(r):(this.#t=n+(t.expireAfter?t.expireAfter:t.expire?this.AnimSettings[e]?.duration??0:0),t.drop&&(this.#e=this.#t),t.locked&&(this.#r=!0),e!==this.state.current?requestAnimationFrame(()=>{this.state.isIdle?this.state.push(e):this.state.swap(e),r&&requestAnimationFrame(r),t.pop&&this.#i()}):(r?.(),t.pop&&this.#i()))}unlock(){this.#r=!1,this.state.pop(this.state.current)}to;get current(){return this.toString()}toString(){return this.state.current}state;AnimSettings},Br=(s,t)=>new Bt(s,t);var Gr=s=>function(...t){try{return s.apply(this,t)}catch(e){console.warn(e)}};function ye(s){if(typeof s=="function")return s;{let t=s,e=m.shadow.bind(null,s),r=De(t);return nt(n=>{switch(n){case"shadow":return e;case"slotted":return r;case"state":return i=>new Y(i);default:return Te()[n]}})}}var Hr=s=>t=>ue()(s(t));globalThis.Reflect.metadata??=()=>{};var Vr=Object.assign(ye,xe,{String,Number,Boolean}),m=Vr;var Wr=`
:host {
  display: inline-flex;
  outline: none;
  user-select: none;
  touch-action: none;
}

:host([autoresize]) {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

:host([autoresize]) canvas {
  width: 100% !important;
  height: 100% !important;
}

canvas {
  image-rendering: crisp-edges;
}`,z=class extends HTMLElement{root=m.shadow(this,`<style>${Wr}</style><canvas></canvas>`);autoResize=!1;width=300;height=100;pixelRatio=window.devicePixelRatio;background="#123";color="#1ff";workerUrl=new URL("./x-waveform-worker.js",import.meta.url).href;worker=new Worker(this.workerUrl,{type:"module"});workerData;analyser;analyserData;canvas;draw;loop;start(){this.loop?.start()}stop(){this.loop?.stop()}destroy=m(this).reduce(({worker:t})=>()=>t.terminate());mounted(t){let e;t.effect(({root:r,worker:n})=>{if(t.canvas)return;let o=(t.canvas=r.querySelector("canvas")).transferControlToOffscreen();n.postMessage({canvas:o},[o])}),t.effect(({canvas:r,width:n,height:i,pixelRatio:o,background:c,worker:u})=>{r.style.width=n+"px",r.style.height=i+"px",u.postMessage({pixelRatio:o,width:n,height:i,background:c})}),t.draw=t.reduce(({analyser:r,analyserData:n,worker:i,workerData:o})=>(cancelAnimationFrame(e),i.postMessage({analyserData:o}),function c(){e=requestAnimationFrame(c),r.getFloatTimeDomainData(n),o.set(n)})),t.analyserData=t.reduce(({analyser:r})=>new Float32Array(r.frequencyBinCount)),t.workerData=t.reduce(({analyser:r})=>new Float32Array(new SharedArrayBuffer(r.frequencyBinCount*4))),t.loop=t.reduce(({draw:r,worker:n})=>({start(){e=requestAnimationFrame(r),n.postMessage({start:!0})},stop(){cancelAnimationFrame(e),n.postMessage({stop:!0})}})),t.effect(({loop:r})=>(r.start(),()=>r.stop()))}};I([m.attr()],z.prototype,"autoResize",2),I([m.attr()],z.prototype,"width",2),I([m.attr()],z.prototype,"height",2),I([m.attr()],z.prototype,"pixelRatio",2),I([m.attr()],z.prototype,"background",2),I([m.attr()],z.prototype,"color",2),z=I([m.element()],z);export{z as WaveformElement};
/*! Bundled license information:

everyday-utils/dist/esm/everyday-utils.js:
  (*!? 'create accessor', key, prev, next *)
  (*!? 'removing accessor', key, desc *)

html-vdom/dist/esm/props.js:
  (*!? 'create event listener', attr, value *)
  (*!? 'create function', attr, value *)
  (*!? 'disconnected, removing all attrs and props', cacheRef *)
  (*!? 'removed attr', name *)
  (*!? 'removed event listener', name *)
  (*!? 'removed prop', name *)
  (*!? 'updated fn' *)
  (*!? 'updated event listener', attr, prev, value *)
  (*!? 'updated function', attr, prev, value *)

event-toolkit/dist/esm/abort.js:
  (*!warn error *)

event-toolkit/dist/esm/queue.js:
  (*!warn _error *)
  (*!? 'wrap called' *)
  (*!? 'updating fn' *)
  (*!? 'new options', initialOptions, newOptions *)
  (*!? 'updated and returned previous wrapped' *)

sigl/dist/esm/context.js:
  (*!? 'attach context to target', target *)
  (*!? 'change listener', key *)
  (*!? 'creating accessors' *)
  (*!? 'context setter:', key, v *)
  (*!? 'context target setter:', key, v *)
  (*!? 'context target isDifferent', isDifferent, key, prev, v *)
  (*!? this.effects.get(key) *)
  (*!? 'setting event target', key *)

sigl/dist/esm/attrs.js:
  (*!? 'setting attr "%s"', k, v.toString() *)
  (*!? 'written attr:', data[k] *)
  (*!? 'setting', attr, value *)
  (*!warn 'setter changed', key, value *)

sigl/dist/esm/element.js:
  (*!? 'own observed attributes', ownObservedAttributes, superclass *)
  (*!? 'valueCtor', valueCtor.name *)
  (*!? 'value', value *)
  (*!? 'type', key, type.toString() *)
  (*!? 'apply attrs', attrs *)
  (*!? 'creating', this *)
  (*!? 'mounted', this *)
  (*!? 'unmounted', this *)
  (*!? 'render', this, result *)
  (*!? 'part', this, output *)
  (*!? 'connected' *)
  (*!dir this *)
  (*!warn 'attributeChangedCallback:', name, newValue *)
  (*!? 'is different:', isDifferent, name, prev, next *)
  (*!? 'propertyChangedCallback:', key, next *)

sigl/dist/esm/state.js:
  (*!warn 'push %s', this.stack *)
  (*!warn 'pop %s (-%s)', this.stack, state *)
  (*!warn 'cancel %s (-%s)', this.stack, state *)
  (*!warn 'swap %s (!%s)', this.stack, prev *)
*/
