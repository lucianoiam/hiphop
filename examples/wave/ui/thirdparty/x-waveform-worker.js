var t,o,s,y,p,b=(a,r,l)=>{let i=0,d=0,h;for(let f=r;f<l;f++)h=a[f]**2.1,h>0&&(h>d?d=h:h<i&&(i=h));let c=(d-i)*t.height,g=(t.height-c)/2,n=e.createLinearGradient(0,g,0,g+c);n.addColorStop(0,"rgba(20, 255, 255, 0.28)"),n.addColorStop(.35,"rgba(20, 255, 255, 0.69)"),n.addColorStop(.48,"rgba(20, 255, 255, 0.9)"),n.addColorStop(.5,"rgba(20, 255, 255, 1.0)"),n.addColorStop(.52,"rgba(20, 255, 255, 0.9)"),n.addColorStop(.65,"rgba(20, 255, 255, 0.69)"),n.addColorStop(1,"rgba(20, 255, 255, 0.28)"),e.fillStyle=n,e.fillRect(t.width-o,g,o,c)},m=()=>{if(p=requestAnimationFrame(m),!s||!isFinite(s[0])||s[0]===0)return;let a=s;e.globalCompositeOperation="source-over",e.drawImage(t,-1,0,t.width,t.height),e.fillStyle=y,e.fillRect(t.width-o,0,o,t.height);let r=8,l=a.length/r|0;b(a,0,l),e.globalCompositeOperation="lighten";for(let i=1;i<r;i++)b(a,i*l,i*l+l);e.globalCompositeOperation="source-over",e.fillStyle="rgba(0,0,0,0.3)",e.fillRect(t.width-o,t.height/2,o,t.height/2)},w=()=>{cancelAnimationFrame(p),m()},u=()=>{cancelAnimationFrame(p)},e;self.onmessage=a=>{if(a.data.canvas){t=a.data.canvas,e=t.getContext("2d",{alpha:!1,desynchronized:!0})}else if(a.data.width){o=a.data.pixelRatio;let r=a.data.width,l=a.data.height,i=r*o|0,d=l*o|0;y=a.data.background,(i!==t.width||d!==t.height)&&(t.width=i,t.height=d,e.fillStyle=a.data.background,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgba(0,0,0,0.3)",e.fillRect(0,t.height/2,t.width,t.height/2))}else a.data.start?w():a.data.stop?u():a.data.analyserData&&(s=a.data.analyserData)};
//!? 'received canvas from main thread'
